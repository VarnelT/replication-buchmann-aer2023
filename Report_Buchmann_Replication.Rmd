---
title: "Optimizing Incentives for Child Marriage Prevention"
subtitle: "Replication and Heterogeneity Analysis of Buchmann et al. (2023)"
author: "TIENTCHEU Varnel - ENSAE Paris"
date: "`r Sys.Date()`"
output: 
  pdf_document:
    toc: true
    number_sections: true
    highlight: tango
---

```{r setup, include=FALSE}
# Configuration globale
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, fig.align = "center")

# Chargement des librairies nécessaires pour le rapport
library(tidyverse)
library(knitr)
library(gt)

# Chargement des données générées par nos scripts (Step B)
# On charge les résultats CATE pour calculer les chiffres clés dans le texte
df_results <- readRDS("data/df_cate_results.rds")

# Calculs dynamiques pour le texte (Policy Value)
# 1. Règle de décision : CATE < 0
df_policy <- df_results %>%
  mutate(target = if_else(cate < 0, 1, 0))

# 2. Chiffres clés
n_total <- nrow(df_policy)
pct_target <- mean(df_policy$target) * 100

ate_global <- mean(df_policy$cate)
gate_target <- mean(df_policy$cate[df_policy$target == 1])

efficiency_gain <- (abs(gate_target) - abs(ate_global)) / abs(ate_global) * 100
```

# Résumé exécutif
Ce rapport présente une reproduction complète et une extension par Machine Learning de l'article "Punt on the most effective intervention? Evidence from a RCT in Bangladesh" (Buchmann et al., 2023).
Alors que nous avons reproduit avec succès le résultat original — à savoir que les incitations financières réduisent le mariage précoce de ```{r round(abs(ate_global)*100, 1)} points de pourcentage (pp) en moyenne — notre analyse d'hétérogénéité révèle que cette moyenne masque des variations significatives.

En utilisant des Forêts Causales (Generalized Random Forests), nous avons découvert que l'intervention est inefficace, voire potentiellement contre-productive, pour environ r round(100 - pct_target, 0) % de la population (principalement des filles déjà déscolarisées).

Recommandation Clé : Une règle de politique publique ciblant uniquement les "répondantes prédictives" (predicted responders) ne traiterait que r round(pct_target, 1) % de la population. Cette stratégie augmenterait l'efficacité du programme de r round(efficiency_gain, 1) %, portant l'impact moyen par fille traitée à r round(abs(gate_target)*100, 2) pp.